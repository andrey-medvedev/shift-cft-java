# ШИФТ ЦФТ. Тестовое задание. Курс Java.

Полное описание [задания](https://drive.google.com/file/d/10qhGjn7biURykP8hIcT6NJHoGX-WOHUh/view)

---

## Краткое описание задания

### Утилита фильтрации содержимого файлов

### 1. Запуск утилиты
- Утилита запускается из консоли с передачей списка входных аргументов.
- Входные файлы содержат три типа данных:
   - **Целые числа** (`integers`);
   - **Числа с плавающей точкой** (`floats`);
   - **Строки** (`strings`);
- Все элементы разделены символом **переноса строки** (`\n`).
- Файлы обрабатываются **построчно** в порядке их указания в консоли.
- Входные файлы для сортировки добавляются с помощью флага ```-l <имя-файла>.txt```.

---

### 2. Разделение данных и сохранение в файлы
- Данные сортируются по типам и записываются в **три отдельных файла**:
   -  `integers.txt` — целые числа;
   -  `floats.txt` — числа с плавающей точкой;
   -  `strings.txt` — строки;
- **По умолчанию** файлы результатов создаются в текущей папке (**`output-files`**).
- Дополнительные **опции командной строки**:
   - `-o <путь>` — **указать папку** для сохранения файлов.
   - `-p <префикс>` — **добавить префикс** к именам файлов (пример: `result_`).

---

### 3. Режимы работы с файлами
- По умолчанию содержимое файлов **перезаписывается**.
- При использовании **`-a`** новые данные **добавляются** в существующие файлы.
- Если во входных данных нет определённого типа, соответствующий выходной файл не создаётся (пример: если нет вещественных чисел, то нет смысла создавать пустой выходной файл).

---

### 4. Генерация статистики
Утилита поддерживает два режима статистики:
- **Краткая статистика (`-s`)**
   - Количество записанных элементов.
- **Полная статистика (`-f`)**
   - **Для чисел**:
      - Минимальное и максимальное значения;
      - Сумма и среднее арифметическое;
   - **Для строк**:
      - Длина самой короткой и самой длинной строки;
- Статистика **выводится в консоль**.

---

### 5. Обработка ошибок
- Все возможные ошибки **обрабатываются** без критического завершения работы.
- В случае ошибки программа **сообщает пользователю** о проблеме.
- Прерывание выполнения нежелательно — если возможно, утилита продолжает работу.

---

### 6. Код и архитектура
- Код должен быть **чистым**, структурированным и читаемым.
- Язык программирования: **Java**.
- Поддержка систем сборки: **Maven**.
- При использовании сторонних библиотек указывать **название, версию**.

---

## Сборка и запуск

Для сборки и запуска требуются Java и Maven, в процессе разработки использовались следующие версии:

````
Java version: 17.0.12
Apache Maven 3.9.9
````

### Сторонние библиотеки

Все использованные библиотеки можно посмотреть ниже или в [pom.xml](https://github.com/andrey-medvedev/shift-cft-java/blob/master/pom.xml).

```
<dependencies>

    <dependency>
      <groupId>com.beust</groupId>
      <artifactId>jcommander</artifactId>
      <version>1.82</version>
    </dependency>

    <dependency>
      <groupId>org.projectlombok</groupId>
      <artifactId>lombok</artifactId>
      <version>1.18.24</version>
      <scope>provided</scope>
    </dependency>

  </dependencies>
```

### Сборка проекта в JAR-файл

Для сборки необходимо:
- Скачать репозиторий и распаковать его.
- Открыть терминал в директории проекта и прописать:
````
mvn clean
mvn package
````
- В директории проекта появится папка ./target, в которую необходимо перейти через консоль и запустить cft-test-task.jar:
````
cft-test-task-1.0-SNAPSHOT.jar (jar без зависимостей)
cft-test-task.jar (включает в себя все зависимости)
java -jar cft-test-task.jar -l in1.txt -l in2.txt (пример запуска)
````

### Флаги запуска программы

- ```-l``` - добавляет txt файл в список входных файлов для сортировки;
- ```-o <путь>``` - задает путь до директории, в которой будут сохраняться результаты сортировки;
- ```-p <префикс>``` - задает префикс имени выходных файлов;
- ```-a``` - если флаг указан, то отсортированные данные добавляются в существующие файлы, а не перезаписывают их;
- ```-s``` - если флаг указан, то выводится краткая статистика;
- ```-f``` - если флаг указан, то выводится полная статистика;

---

### Детали
- Если нужно добавить несколько файлов, то каждый следующий параметр должен начинаться с ```-l```, например,
    ```-l in1.txt - l in2.txt -l <мя-файла>.txt``` и т.д.
- txt файлы с входными данными программа ищет в проекте в папке ```resources```.
- Если файлы не указаны, то будут использоваться ```in1.txt``` и ```in2.txt```.
- Если какой-то из файлов не найден, то вместо него будет использоваться ```in1.txt```, т.е. ```in1.txt```
может использоваться несколько раз.

---

- Если не указан выходной путь ```-o <путь>```, то программа создает директорию```output-files``` в target
и туда запишет отсортированные файлы.
- Если собрать jar и запустить программу через IDE, выходная директория создаться в корне проекта.

---

- Если не задан префикс ```-p <рефикс>```, то по умолчанию он будет пустым ```""```.

---

- По умолчанию идет перезапись файлов.

---

- Флаги ```-s``` и ```-f``` взаимоисключающие, по умолчанию используется ```-s```.
- Если ни одни из флагов статистики не указан, то никакая из статистик не будет выводиться.

---

- Если какой-либо из флагов не задан или задан не правильно, то программа выведет сообщение для соответствующего поля и установит значение по умолчанию.

### Примеры команд запуска jar

```
java -jar cft-test-task.jar (верно)
java -jar cft-test-task.jar -l in1.txt -l in2.txt (верно)
java -jar cft-test-task.jar -l in1.txt -l in2.txt -a (верно)
java -jar cft-test-task.jar -l in1.txt -l in2.txt -a -o C:\Users\имя-пользователя\Desktop (верно)
java -jar cft-test-task.jar -l in1.txt -l in2.txt -f -o C:\Users\имя-пользователя\Downloads -a -p result_ (верно)
java -jar cft-test-task.jar -l sdhkjsdhf.ppt -l fghdjikfg.pdf -l cxvbnmz -f -o Z:/dfgdfg/asdasd/1.txt -s -a -p "" (тоже верно)
java -jar cft-test-task.jar -l-l -a-a -f-f -s-s -o-o -p-p (тоже верно)
```

### Созданные классы

- ```Main``` — главный класс программы, который обрабатывает входные аргументы,
выполняет их валидацию и запускает обработку файлов.
- ```ArgumentsParser``` — отвечает за парсинг аргументов командной строки.
- ```ArgumentsValidatorUtil``` — проверяет корректность введенных аргументов, при необходимости
заменяет их на значения по умолчанию.
- ```FileProcessor``` — выполняет чтение данных из входных файлов, их фильтрацию,
запись отфильтрованных данных в выходные файлы и вывод статистики.
- ```FileServiceUtil``` — позволяет читать и записывать данные в файлы.
- ```DataFilter``` — разделяет входные строки на целые числа, числа с плавающей точкой и строки.
- ```StatisticsCollectors``` — собирает и выводит статистику по обработанным данным.
